# BowWow Security Headers Configuration
# TODO: [SECURITY-001] Nginx 보안 헤더 설정 - API Gateway에 적용 필요
# TODO: [SECURITY-002] HTTPS 강제 리디렉션 및 HSTS 설정 추가
# TODO: [SECURITY-003] Rate Limiting 및 DDoS 방어 설정 구현
# TODO: [SECURITY-004] IP 화이트리스트/블랙리스트 관리 시스템

# Security Headers Block
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# TODO: [CSP-001] Content Security Policy 세부 정책 설정
# 현재는 API만 사용하므로 기본 설정, 웹 클라이언트 추가 시 수정 필요
add_header Content-Security-Policy "default-src 'self'; script-src 'self'; object-src 'none'; frame-ancestors 'none';" always;

# TODO: [HSTS-001] HTTP Strict Transport Security 설정
# HTTPS 적용 후 활성화 필요 (현재 주석 처리)
# add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

# TODO: [CORS-001] CORS 정책 환경별 세분화 필요
# 개발/프로덕션 환경에 따른 허용 도메인 관리
# add_header Access-Control-Allow-Origin "https://your-frontend-domain.com" always;

# TODO: [RATE-LIMIT-001] API 요청 속도 제한 설정
# limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/m;
# limit_req zone=api_limit burst=20 nodelay;

# TODO: [GEO-BLOCK-001] 특정 지역 차단 설정 (선택사항)
# 위치 기반 서비스 특성상 지역 제한이 필요할 수 있음
# geoip2 /path/to/GeoLite2-Country.mmdb {
#     $geoip2_data_country_code source=$remote_addr country iso_code;
# }

# TODO: [SSL-001] SSL/TLS 설정 강화
# ssl_protocols TLSv1.2 TLSv1.3;
# ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
# ssl_prefer_server_ciphers off;
# ssl_session_cache shared:SSL:10m;
# ssl_session_timeout 10m;

# TODO: [LOGGING-001] 보안 이벤트 로깅 설정
# access_log /var/log/nginx/access.log combined;
# error_log /var/log/nginx/error.log warn;